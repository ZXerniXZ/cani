{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./App.css';import{richiediPermessoNotifiche}from'./index';// Importo le icone da react-icons\nimport{FaLock,FaLeaf,FaCheck}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FAMIGLIE=['ermes-ben','raya','Visualizzatore'];const PUSH_SERVER_URL='https://cani-backend.onrender.com';function formatDate(ts){const d=new Date(ts);return d.toLocaleString();}function App(){const[famiglia,setFamiglia]=useState('');const[famigliaSelezionata,setFamigliaSelezionata]=useState(null);const[stato,setStato]=useState(null);const[conn,setConn]=useState('connecting');const[notificheAttive,setNotificheAttive]=useState(false);// Stato per mostrare il pulsante di sblocco dopo 20s\nconst[showUnlock,setShowUnlock]=React.useState(false);// Stato per attesa backend\nconst[backendReady,setBackendReady]=React.useState(false);const[isBooking,setIsBooking]=React.useState(false);const[bookingConfirmed,setBookingConfirmed]=React.useState(false);const bookingTimeout=React.useRef(null);const pollingInterval=React.useRef(null);// Funzione per registrare la subscription push (ora prende la VAPID key dal backend)\nasync function registraPush(){if('serviceWorker'in navigator&&'PushManager'in window){const reg=await navigator.serviceWorker.ready;try{// Recupera la VAPID public key dal backend\nconst resp=await fetch(PUSH_SERVER_URL+'/vapidPublicKey');const data=await resp.json();const VAPID_PUBLIC_KEY=data.publicKey;const sub=await reg.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:urlBase64ToUint8Array(VAPID_PUBLIC_KEY)});// Invia la subscription al backend\nawait fetch(PUSH_SERVER_URL+'/subscribe',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(sub)});console.log('Push subscription inviata al backend:',JSON.stringify(sub));return true;}catch(e){console.warn('Push subscription error',e);return false;}}return false;}// Funzione per cancellare la subscription push\nasync function cancellaPush(){if('serviceWorker'in navigator&&'PushManager'in window){const reg=await navigator.serviceWorker.ready;try{const subscription=await reg.pushManager.getSubscription();if(subscription){// Notifica il backend della cancellazione\ntry{await fetch(PUSH_SERVER_URL+'/unsubscribe',{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({endpoint:subscription.endpoint})});}catch(e){console.warn('Errore notifica cancellazione al backend:',e);}await subscription.unsubscribe();console.log('Push subscription cancellata');return true;}}catch(e){console.warn('Push unsubscription error',e);}}return false;}// Funzione per gestire l'attivazione/disattivazione delle notifiche\nasync function toggleNotifiche(){if(!notificheAttive){// Attiva notifiche\nconst perm=await richiediPermessoNotifiche();if(perm==='granted'){const success=await registraPush();if(success){setNotificheAttive(true);localStorage.setItem('notificheAttive','true');}}}else{// Disattiva notifiche\nconst success=await cancellaPush();if(success){setNotificheAttive(false);localStorage.setItem('notificheAttive','false');}}}// Funzione di utilità per VAPID key\nfunction urlBase64ToUint8Array(base64String){const padding='='.repeat((4-base64String.length%4)%4);const base64=(base64String+padding).replace(/-/g,'+').replace(/_/g,'/');const rawData=window.atob(base64);const outputArray=new Uint8Array(rawData.length);for(let i=0;i<rawData.length;++i){outputArray[i]=rawData.charCodeAt(i);}return outputArray;}// Recupera la famiglia selezionata e lo stato notifiche da localStorage all'avvio\nuseEffect(()=>{const salvata=localStorage.getItem('famiglia');const notificheSalvate=localStorage.getItem('notificheAttive');if(salvata){setFamigliaSelezionata(salvata);setFamiglia(salvata);}if(notificheSalvate){setNotificheAttive(notificheSalvate==='true');}},[]);// Controllo backend all'avvio\nReact.useEffect(()=>{let stop=false;async function checkBackend(){try{const resp=await fetch(PUSH_SERVER_URL+'/health',{method:'GET'});if(resp.ok){setBackendReady(true);setConn('connected');return;}}catch{}if(!stop)setTimeout(checkBackend,3000);}checkBackend();return()=>{stop=true;};},[]);// Ping periodico per tenere sveglio il backend (ogni 5 minuti)\nReact.useEffect(()=>{const interval=setInterval(()=>{fetch(PUSH_SERVER_URL+'/health').catch(()=>{});},5*60*1000);// ogni 5 minuti\nreturn()=>clearInterval(interval);},[]);// Effetto per la polling del backend per aggiornare lo stato del giardino\nuseEffect(()=>{if(!famigliaSelezionata)return;let stopPolling=false;async function pollStato(){if(stopPolling)return;try{const resp=await fetch(`${PUSH_SERVER_URL}/stato`);if(resp.ok){const data=await resp.json();setStato(data);setConn('connected');}else{console.warn('Errore nella polling del stato:',resp.status);setConn('error');}}catch(e){console.warn('Errore nella polling del stato:',e);setConn('error');}if(!stopPolling){pollingInterval.current=setTimeout(pollStato,2000);// Poll ogni 2 secondi\n}}pollStato();return()=>{stopPolling=true;if(pollingInterval.current)clearTimeout(pollingInterval.current);};},[famigliaSelezionata]);useEffect(()=>{if(conn==='connected'&&stato===null){const t=setTimeout(()=>setShowUnlock(true),20000);return()=>clearTimeout(t);}else{setShowUnlock(false);}},[conn,stato]);const pubblicaStato=async nuovoStato=>{if(famigliaSelezionata){try{const payload={stato:nuovoStato,famiglia:famigliaSelezionata,timestamp:Date.now()};const resp=await fetch(`${PUSH_SERVER_URL}/stato`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(resp.ok){setStato(payload);}else{console.warn('Errore nella pubblicazione dello stato:',resp.status);}}catch(e){console.warn('Errore nella pubblicazione dello stato:',e);}}};// Quando clicco Occupa Giardino\nconst handleOccupa=async()=>{setIsBooking(true);setBookingConfirmed(false);await pubblicaStato('occupato');// Se dopo 10s non arriva conferma, resetta\nif(bookingTimeout.current)clearTimeout(bookingTimeout.current);bookingTimeout.current=setTimeout(()=>setIsBooking(false),10000);};// Quando arriva il messaggio MQTT di occupazione confermata dalla propria famiglia\nReact.useEffect(()=>{if(isBooking&&(stato===null||stato===void 0?void 0:stato.stato)==='occupato'&&stato.famiglia===famigliaSelezionata){setBookingConfirmed(true);setIsBooking(false);if(bookingTimeout.current)clearTimeout(bookingTimeout.current);}},[isBooking,stato,famigliaSelezionata]);// Quando il giardino torna libero, resetta la conferma di booking\nReact.useEffect(()=>{if(bookingConfirmed&&(stato===null||stato===void 0?void 0:stato.stato)==='libero'){setBookingConfirmed(false);}},[bookingConfirmed,stato]);// Card stato giardino\nlet cardGradient=stato&&stato.stato==='occupato'?'giardino-card-occupato':'giardino-card-libero';let cardIcon=stato&&stato.stato==='occupato'?/*#__PURE__*/_jsx(\"span\",{style:{display:'block',marginBottom:12},children:/*#__PURE__*/_jsx(FaLock,{size:48})}):/*#__PURE__*/_jsx(\"span\",{style:{display:'block',marginBottom:12},children:/*#__PURE__*/_jsx(FaLeaf,{size:48})});let cardTitle=stato&&stato.stato==='occupato'?'Giardino occupato':'Giardino libero';let cardInfo=stato?stato.stato==='occupato'?`Occupato da: ${stato.famiglia}\\nDal: ${formatDate(stato.timestamp)}`:`Ultimo utilizzatore: ${stato.famiglia}\\nDal: ${formatDate(stato.timestamp)}`:'';// Blocca tutto finché il backend non è up\nif(!backendReady){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#222',color:'#fff',borderRadius:16,width:400,height:220,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',fontSize:28,fontWeight:'bold',margin:'0 auto',boxShadow:'0 4px 24px #0006',position:'relative'},children:[\"Avvio backend...\",/*#__PURE__*/_jsx(\"br\",{}),\"Potrebbe volerci qualche momento\"]})})});}if(conn!=='connected'){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",style:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",style:{width:'100vw',minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',padding:0},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#222',color:'#fff',borderRadius:16,width:400,height:220,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',fontSize:32,fontWeight:'bold',margin:'0 auto',boxShadow:'0 4px 24px #0006',position:'relative'},children:[\"Connessione al backend...\",/*#__PURE__*/_jsx(\"div\",{style:{marginTop:24,fontSize:18,color:'#aaa'},children:\"Attendere...\"})]})})});}// Schermata di caricamento stato giardino\nif(conn==='connected'&&stato===null){// Funzione per pubblicare uno stato iniziale retained\nconst pubblicaStatoIniziale=async()=>{if(famigliaSelezionata){const payload={stato:'libero',famiglia:famigliaSelezionata,timestamp:Date.now()};try{const resp=await fetch(`${PUSH_SERVER_URL}/stato`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(resp.ok){setStato(payload);}else{console.warn('Errore nella pubblicazione dello stato iniziale:',resp.status);}}catch(e){console.warn('Errore nella pubblicazione dello stato iniziale:',e);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#222',color:'#fff',borderRadius:16,width:400,height:260,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',fontSize:28,fontWeight:'bold',margin:'0 auto',boxShadow:'0 4px 24px #0006',position:'relative'},children:[\"Recupero stato giardino...\",/*#__PURE__*/_jsx(\"div\",{style:{marginTop:24,fontSize:18,color:'#aaa'},children:\"Attendere...\"}),showUnlock&&/*#__PURE__*/_jsx(\"button\",{style:{marginTop:32,fontSize:18},onClick:pubblicaStatoIniziale,children:\"Sblocca (pubblica stato iniziale)\"})]})})});}// Schermata di selezione famiglia\nif(!famigliaSelezionata){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#222',color:'#fff',borderRadius:16,width:400,height:220,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',fontSize:28,fontWeight:'bold',margin:'0 auto',boxShadow:'0 4px 24px #0006',position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:32},children:\"Seleziona la tua famiglia:\"}),/*#__PURE__*/_jsxs(\"select\",{value:famiglia,onChange:e=>setFamiglia(e.target.value),style:{fontSize:22,marginBottom:24},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"-- Scegli --\"}),FAMIGLIE.map(f=>/*#__PURE__*/_jsx(\"option\",{value:f,children:f==='Visualizzatore'?'Visualizzatore (solo lettura)':f},f))]}),/*#__PURE__*/_jsx(\"button\",{style:{fontSize:20,padding:'10px 24px'},disabled:!famiglia,onClick:async()=>{setFamigliaSelezionata(famiglia);localStorage.setItem('famiglia',famiglia);},children:\"Conferma\"})]})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"famiglia-label\",children:[\"Famiglia selezionata:\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"famiglia-nome\",children:famigliaSelezionata})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"notifiche-card\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Notifiche Push\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"notifiche-switch\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:notificheAttive,onChange:toggleNotifiche}),/*#__PURE__*/_jsx(\"span\",{className:\"slider round\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"notifiche-stato\",children:notificheAttive?'Attive':'Spente'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:`giardino-card ${cardGradient} ${isBooking||bookingConfirmed||(stato===null||stato===void 0?void 0:stato.stato)==='occupato'?'giardino-card-expanded':''} ${isBooking||bookingConfirmed?'giardino-card-booking':''} ${isBooking?'giardino-card-loading':''} ${bookingConfirmed?'giardino-card-success':''}`,children:isBooking?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"giardino-loader\"}),/*#__PURE__*/_jsx(\"div\",{className:\"giardino-info\",style:{marginTop:18,fontWeight:500,color:'#fff'},children:\"La tua richiesta sta venendo elaborata...\"})]}):bookingConfirmed?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"giardino-success-icon\",children:/*#__PURE__*/_jsx(FaCheck,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"giardino-success-text\",children:\"Hai prenotato con successo il giardino\"}),/*#__PURE__*/_jsx(\"div\",{className:\"giardino-info\",children:cardInfo}),(stato===null||stato===void 0?void 0:stato.stato)==='occupato'&&stato.famiglia===famigliaSelezionata&&/*#__PURE__*/_jsxs(\"button\",{className:\"giardino-btn libera\",style:{marginTop:18,width:'90%'},onClick:async()=>await pubblicaStato('libero'),children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:8,display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsx(FaCheck,{})}),\"Libera Giardino\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[cardIcon,/*#__PURE__*/_jsx(\"div\",{className:\"giardino-title\",children:cardTitle}),/*#__PURE__*/_jsx(\"div\",{className:\"giardino-info\",children:cardInfo}),(stato===null||stato===void 0?void 0:stato.stato)==='occupato'&&stato.famiglia===famigliaSelezionata&&/*#__PURE__*/_jsxs(\"button\",{className:\"giardino-btn libera\",style:{marginTop:18,width:'90%'},onClick:async()=>await pubblicaStato('libero'),children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:8,display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsx(FaCheck,{})}),\"Libera Giardino\"]})]})}),stato&&stato.stato==='libero'&&famigliaSelezionata!=='Visualizzatore'&&!isBooking&&!bookingConfirmed&&/*#__PURE__*/_jsx(\"div\",{className:\"bottoni-row\",style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"button\",{className:\"giardino-btn occupa\",onClick:handleOccupa,children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:8,display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsx(FaLeaf,{})}),\"Occupa Giardino\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mqtt-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mqtt-dot\"}),\" API: Connesso\"]})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","richiediPermessoNotifiche","FaLock","FaLeaf","FaCheck","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FAMIGLIE","PUSH_SERVER_URL","formatDate","ts","d","Date","toLocaleString","App","famiglia","setFamiglia","famigliaSelezionata","setFamigliaSelezionata","stato","setStato","conn","setConn","notificheAttive","setNotificheAttive","showUnlock","setShowUnlock","backendReady","setBackendReady","isBooking","setIsBooking","bookingConfirmed","setBookingConfirmed","bookingTimeout","useRef","pollingInterval","registraPush","navigator","window","reg","serviceWorker","ready","resp","fetch","data","json","VAPID_PUBLIC_KEY","publicKey","sub","pushManager","subscribe","userVisibleOnly","applicationServerKey","urlBase64ToUint8Array","method","headers","body","JSON","stringify","console","log","e","warn","cancellaPush","subscription","getSubscription","endpoint","unsubscribe","toggleNotifiche","perm","success","localStorage","setItem","base64String","padding","repeat","length","base64","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt","salvata","getItem","notificheSalvate","stop","checkBackend","ok","setTimeout","interval","setInterval","catch","clearInterval","stopPolling","pollStato","status","current","clearTimeout","t","pubblicaStato","nuovoStato","payload","timestamp","now","handleOccupa","cardGradient","cardIcon","style","display","marginBottom","children","size","cardTitle","cardInfo","className","background","color","borderRadius","width","height","flexDirection","alignItems","justifyContent","fontSize","fontWeight","margin","boxShadow","position","minHeight","marginTop","pubblicaStatoIniziale","onClick","value","onChange","target","disabled","map","f","type","checked","marginRight"],"sources":["/home/ares-desktop/localRepo/cani/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { richiediPermessoNotifiche } from './index';\n// Importo le icone da react-icons\nimport { FaLock, FaLeaf, FaCheck } from 'react-icons/fa';\n\nconst FAMIGLIE = ['ermes-ben', 'raya', 'Visualizzatore'];\nconst PUSH_SERVER_URL = 'https://cani-backend.onrender.com';\n\nfunction formatDate(ts) {\n  const d = new Date(ts);\n  return d.toLocaleString();\n}\n\nfunction App() {\n  const [famiglia, setFamiglia] = useState('');\n  const [famigliaSelezionata, setFamigliaSelezionata] = useState(null);\n  const [stato, setStato] = useState(null);\n  const [conn, setConn] = useState('connecting');\n  const [notificheAttive, setNotificheAttive] = useState(false);\n  // Stato per mostrare il pulsante di sblocco dopo 20s\n  const [showUnlock, setShowUnlock] = React.useState(false);\n  // Stato per attesa backend\n  const [backendReady, setBackendReady] = React.useState(false);\n  const [isBooking, setIsBooking] = React.useState(false);\n  const [bookingConfirmed, setBookingConfirmed] = React.useState(false);\n  const bookingTimeout = React.useRef(null);\n  const pollingInterval = React.useRef(null);\n\n  // Funzione per registrare la subscription push (ora prende la VAPID key dal backend)\n  async function registraPush() {\n    if ('serviceWorker' in navigator && 'PushManager' in window) {\n      const reg = await navigator.serviceWorker.ready;\n      try {\n        // Recupera la VAPID public key dal backend\n        const resp = await fetch(PUSH_SERVER_URL + '/vapidPublicKey');\n        const data = await resp.json();\n        const VAPID_PUBLIC_KEY = data.publicKey;\n        const sub = await reg.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: urlBase64ToUint8Array(VAPID_PUBLIC_KEY)\n        });\n        // Invia la subscription al backend\n        await fetch(PUSH_SERVER_URL + '/subscribe', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(sub)\n        });\n        console.log('Push subscription inviata al backend:', JSON.stringify(sub));\n        return true;\n      } catch (e) {\n        console.warn('Push subscription error', e);\n        return false;\n      }\n    }\n    return false;\n  }\n\n  // Funzione per cancellare la subscription push\n  async function cancellaPush() {\n    if ('serviceWorker' in navigator && 'PushManager' in window) {\n      const reg = await navigator.serviceWorker.ready;\n      try {\n        const subscription = await reg.pushManager.getSubscription();\n        if (subscription) {\n          // Notifica il backend della cancellazione\n          try {\n            await fetch(PUSH_SERVER_URL + '/unsubscribe', {\n              method: 'DELETE',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ endpoint: subscription.endpoint })\n            });\n          } catch (e) {\n            console.warn('Errore notifica cancellazione al backend:', e);\n          }\n          \n          await subscription.unsubscribe();\n          console.log('Push subscription cancellata');\n          return true;\n        }\n      } catch (e) {\n        console.warn('Push unsubscription error', e);\n      }\n    }\n    return false;\n  }\n\n  // Funzione per gestire l'attivazione/disattivazione delle notifiche\n  async function toggleNotifiche() {\n    if (!notificheAttive) {\n      // Attiva notifiche\n      const perm = await richiediPermessoNotifiche();\n      if (perm === 'granted') {\n        const success = await registraPush();\n        if (success) {\n          setNotificheAttive(true);\n          localStorage.setItem('notificheAttive', 'true');\n        }\n      }\n    } else {\n      // Disattiva notifiche\n      const success = await cancellaPush();\n      if (success) {\n        setNotificheAttive(false);\n        localStorage.setItem('notificheAttive', 'false');\n      }\n    }\n  }\n\n  // Funzione di utilità per VAPID key\n  function urlBase64ToUint8Array(base64String) {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\n    const rawData = window.atob(base64);\n    const outputArray = new Uint8Array(rawData.length);\n    for (let i = 0; i < rawData.length; ++i) {\n      outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n  }\n\n  // Recupera la famiglia selezionata e lo stato notifiche da localStorage all'avvio\n  useEffect(() => {\n    const salvata = localStorage.getItem('famiglia');\n    const notificheSalvate = localStorage.getItem('notificheAttive');\n    if (salvata) {\n      setFamigliaSelezionata(salvata);\n      setFamiglia(salvata);\n    }\n    if (notificheSalvate) {\n      setNotificheAttive(notificheSalvate === 'true');\n    }\n  }, []);\n\n  // Controllo backend all'avvio\n  React.useEffect(() => {\n    let stop = false;\n    async function checkBackend() {\n      try {\n        const resp = await fetch(PUSH_SERVER_URL + '/health', { method: 'GET' });\n        if (resp.ok) {\n          setBackendReady(true);\n          setConn('connected');\n          return;\n        }\n      } catch {}\n      if (!stop) setTimeout(checkBackend, 3000);\n    }\n    checkBackend();\n    return () => { stop = true; };\n  }, []);\n\n  // Ping periodico per tenere sveglio il backend (ogni 5 minuti)\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      fetch(PUSH_SERVER_URL + '/health').catch(() => {});\n    }, 5 * 60 * 1000); // ogni 5 minuti\n    return () => clearInterval(interval);\n  }, []);\n\n  // Effetto per la polling del backend per aggiornare lo stato del giardino\n  useEffect(() => {\n    if (!famigliaSelezionata) return;\n    \n    let stopPolling = false;\n    async function pollStato() {\n      if (stopPolling) return;\n      try {\n        const resp = await fetch(`${PUSH_SERVER_URL}/stato`);\n        if (resp.ok) {\n          const data = await resp.json();\n          setStato(data);\n          setConn('connected');\n        } else {\n          console.warn('Errore nella polling del stato:', resp.status);\n          setConn('error');\n        }\n      } catch (e) {\n        console.warn('Errore nella polling del stato:', e);\n        setConn('error');\n      }\n      if (!stopPolling) {\n        pollingInterval.current = setTimeout(pollStato, 2000); // Poll ogni 2 secondi\n      }\n    }\n    pollStato();\n    return () => { stopPolling = true; if (pollingInterval.current) clearTimeout(pollingInterval.current); };\n  }, [famigliaSelezionata]);\n\n  useEffect(() => {\n    if (conn === 'connected' && stato === null) {\n      const t = setTimeout(() => setShowUnlock(true), 20000);\n      return () => clearTimeout(t);\n    } else {\n      setShowUnlock(false);\n    }\n  }, [conn, stato]);\n\n  const pubblicaStato = async (nuovoStato) => {\n    if (famigliaSelezionata) {\n      try {\n        const payload = {\n          stato: nuovoStato,\n          famiglia: famigliaSelezionata,\n          timestamp: Date.now(),\n        };\n        const resp = await fetch(`${PUSH_SERVER_URL}/stato`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n        });\n        if (resp.ok) {\n          setStato(payload);\n        } else {\n          console.warn('Errore nella pubblicazione dello stato:', resp.status);\n        }\n      } catch (e) {\n        console.warn('Errore nella pubblicazione dello stato:', e);\n      }\n    }\n  };\n\n  // Quando clicco Occupa Giardino\n  const handleOccupa = async () => {\n    setIsBooking(true);\n    setBookingConfirmed(false);\n    await pubblicaStato('occupato');\n    // Se dopo 10s non arriva conferma, resetta\n    if (bookingTimeout.current) clearTimeout(bookingTimeout.current);\n    bookingTimeout.current = setTimeout(() => setIsBooking(false), 10000);\n  };\n\n  // Quando arriva il messaggio MQTT di occupazione confermata dalla propria famiglia\n  React.useEffect(() => {\n    if (isBooking && stato?.stato === 'occupato' && stato.famiglia === famigliaSelezionata) {\n      setBookingConfirmed(true);\n      setIsBooking(false);\n      if (bookingTimeout.current) clearTimeout(bookingTimeout.current);\n    }\n  }, [isBooking, stato, famigliaSelezionata]);\n\n  // Quando il giardino torna libero, resetta la conferma di booking\n  React.useEffect(() => {\n    if (bookingConfirmed && stato?.stato === 'libero') {\n      setBookingConfirmed(false);\n    }\n  }, [bookingConfirmed, stato]);\n\n  // Card stato giardino\n  let cardGradient = stato && stato.stato === 'occupato'\n    ? 'giardino-card-occupato'\n    : 'giardino-card-libero';\n  let cardIcon = stato && stato.stato === 'occupato'\n    ? <span style={{display: 'block', marginBottom: 12}}><FaLock size={48} /></span>\n    : <span style={{display: 'block', marginBottom: 12}}><FaLeaf size={48} /></span>;\n  let cardTitle = stato && stato.stato === 'occupato' ? 'Giardino occupato' : 'Giardino libero';\n  let cardInfo = stato\n    ? (stato.stato === 'occupato'\n        ? `Occupato da: ${stato.famiglia}\\nDal: ${formatDate(stato.timestamp)}`\n        : `Ultimo utilizzatore: ${stato.famiglia}\\nDal: ${formatDate(stato.timestamp)}`)\n    : '';\n\n  // Blocca tutto finché il backend non è up\n  if (!backendReady) {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div style={{\n            background: '#222',\n            color: '#fff',\n            borderRadius: 16,\n            width: 400,\n            height: 220,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: 28,\n            fontWeight: 'bold',\n            margin: '0 auto',\n            boxShadow: '0 4px 24px #0006',\n            position: 'relative',\n          }}>\n            Avvio backend...<br />Potrebbe volerci qualche momento\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  if (conn !== 'connected') {\n    return (\n      <div className=\"App\" style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n        <header className=\"App-header\" style={{ width: '100vw', minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: 0 }}>\n          <div style={{\n            background: '#222',\n            color: '#fff',\n            borderRadius: 16,\n            width: 400,\n            height: 220,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: 32,\n            fontWeight: 'bold',\n            margin: '0 auto',\n            boxShadow: '0 4px 24px #0006',\n            position: 'relative',\n          }}>\n            Connessione al backend...\n            <div style={{ marginTop: 24, fontSize: 18, color: '#aaa' }}>Attendere...</div>\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  // Schermata di caricamento stato giardino\n  if (conn === 'connected' && stato === null) {\n    // Funzione per pubblicare uno stato iniziale retained\n    const pubblicaStatoIniziale = async () => {\n      if (famigliaSelezionata) {\n        const payload = {\n          stato: 'libero',\n          famiglia: famigliaSelezionata,\n          timestamp: Date.now(),\n        };\n        try {\n          const resp = await fetch(`${PUSH_SERVER_URL}/stato`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(payload)\n          });\n          if (resp.ok) {\n            setStato(payload);\n          } else {\n            console.warn('Errore nella pubblicazione dello stato iniziale:', resp.status);\n          }\n        } catch (e) {\n          console.warn('Errore nella pubblicazione dello stato iniziale:', e);\n        }\n      }\n    };\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div style={{\n            background: '#222',\n            color: '#fff',\n            borderRadius: 16,\n            width: 400,\n            height: 260,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: 28,\n            fontWeight: 'bold',\n            margin: '0 auto',\n            boxShadow: '0 4px 24px #0006',\n            position: 'relative',\n          }}>\n            Recupero stato giardino...\n            <div style={{ marginTop: 24, fontSize: 18, color: '#aaa' }}>Attendere...</div>\n            {showUnlock && (\n              <button style={{ marginTop: 32, fontSize: 18 }} onClick={pubblicaStatoIniziale}>\n                Sblocca (pubblica stato iniziale)\n              </button>\n            )}\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  // Schermata di selezione famiglia\n  if (!famigliaSelezionata) {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div style={{\n            background: '#222',\n            color: '#fff',\n            borderRadius: 16,\n            width: 400,\n            height: 220,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: 28,\n            fontWeight: 'bold',\n            margin: '0 auto',\n            boxShadow: '0 4px 24px #0006',\n            position: 'relative',\n          }}>\n            <div style={{ marginBottom: 32 }}>Seleziona la tua famiglia:</div>\n            <select\n              value={famiglia}\n              onChange={e => setFamiglia(e.target.value)}\n              style={{ fontSize: 22, marginBottom: 24 }}\n            >\n              <option value=\"\" disabled>-- Scegli --</option>\n              {FAMIGLIE.map(f => (\n                <option key={f} value={f}>\n                  {f === 'Visualizzatore' ? 'Visualizzatore (solo lettura)' : f}\n                </option>\n              ))}\n            </select>\n            <button\n              style={{ fontSize: 20, padding: '10px 24px' }}\n              disabled={!famiglia}\n              onClick={async () => {\n                setFamigliaSelezionata(famiglia);\n                localStorage.setItem('famiglia', famiglia);\n              }}\n            >\n              Conferma\n            </button>\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <div className=\"famiglia-label\">\n          Famiglia selezionata:<br />\n          <span className=\"famiglia-nome\">{famigliaSelezionata}</span>\n        </div>\n        <div className=\"notifiche-card\">\n          <span>Notifiche Push</span>\n          <div className=\"notifiche-switch\">\n            <label className=\"switch\">\n              <input\n                type=\"checkbox\"\n                checked={notificheAttive}\n                onChange={toggleNotifiche}\n              />\n              <span className=\"slider round\"></span>\n            </label>\n            <span className=\"notifiche-stato\">{notificheAttive ? 'Attive' : 'Spente'}</span>\n          </div>\n        </div>\n        {/* Card con animazione e contenuto dinamico */}\n        <div className={`giardino-card ${cardGradient} ${(isBooking || bookingConfirmed || stato?.stato === 'occupato') ? 'giardino-card-expanded' : ''} ${(isBooking || bookingConfirmed) ? 'giardino-card-booking' : ''} ${isBooking ? 'giardino-card-loading' : ''} ${bookingConfirmed ? 'giardino-card-success' : ''}`}> \n          {isBooking ? (\n            <>\n              <div className=\"giardino-loader\" />\n              <div className=\"giardino-info\" style={{marginTop: 18, fontWeight: 500, color: '#fff'}}>\n                La tua richiesta sta venendo elaborata...\n              </div>\n            </>\n          ) : bookingConfirmed ? (\n            <>\n              <div className=\"giardino-success-icon\"><FaCheck /></div>\n              <div className=\"giardino-success-text\">Hai prenotato con successo il giardino</div>\n              <div className=\"giardino-info\">{cardInfo}</div>\n              {stato?.stato === 'occupato' && stato.famiglia === famigliaSelezionata && (\n                <button\n                  className=\"giardino-btn libera\"\n                  style={{marginTop: 18, width: '90%'}}\n                  onClick={async () => await pubblicaStato('libero')}\n                >\n                  <span style={{marginRight: 8, display: 'flex', alignItems: 'center'}}><FaCheck /></span>Libera Giardino\n                </button>\n              )}\n            </>\n          ) : (\n            <>\n              {cardIcon}\n              <div className=\"giardino-title\">{cardTitle}</div>\n              <div className=\"giardino-info\">{cardInfo}</div>\n              {/* Se occupato e la famiglia è quella giusta, mostra il pulsante dentro la card */}\n              {stato?.stato === 'occupato' && stato.famiglia === famigliaSelezionata && (\n                <button\n                  className=\"giardino-btn libera\"\n                  style={{marginTop: 18, width: '90%'}}\n                  onClick={async () => await pubblicaStato('libero')}\n                >\n                  <span style={{marginRight: 8, display: 'flex', alignItems: 'center'}}><FaCheck /></span>Libera Giardino\n                </button>\n              )}\n            </>\n          )}\n        </div>\n        {/* Se giardino libero, mostra solo il pulsante Occupa sotto la card, ma non durante booking */}\n        {stato && stato.stato === 'libero' && famigliaSelezionata !== 'Visualizzatore' && !isBooking && !bookingConfirmed && (\n          <div className=\"bottoni-row\" style={{marginTop: 12}}>\n            <button\n              className=\"giardino-btn occupa\"\n              onClick={handleOccupa}\n            >\n              <span style={{marginRight: 8, display: 'flex', alignItems: 'center'}}><FaLeaf /></span>Occupa Giardino\n            </button>\n          </div>\n        )}\n        <div className=\"mqtt-label\">\n          <span className=\"mqtt-dot\" /> API: Connesso\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}